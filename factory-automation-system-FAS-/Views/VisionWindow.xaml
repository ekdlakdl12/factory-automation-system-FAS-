<Window x:Class="factory_automation_system_FAS_.Views.VisionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:factory_automation_system_FAS_.Views"
        mc:Ignorable="d"
        Title="비전 검사 모니터링 시스템" Height="600" Width="1000" Background="#F3F3F3">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <GroupBox Header="검사 데이터 이력" Grid.Column="0" Margin="5" Padding="5">
            <DataGrid x:Name="dgVisionEvents" 
                      ItemsSource="{Binding VisionList}"
                      AutoGenerateColumns="False" 
                      IsReadOnly="True" 
                      SelectionMode="Single"
                      SelectionChanged="dgVisionEvents_SelectionChanged"
                      AlternatingRowBackground="#F9F9F9">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="검사시간" Binding="{Binding time_kst, StringFormat='yyyy-MM-dd HH:mm:ss.fff'}" Width="160"/>
                    <DataGridTextColumn Header="타입" Binding="{Binding type}" Width="60"/>
                    <DataGridTextColumn Header="측정치(ms)" Binding="{Binding ms}" Width="80">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="X좌표" Binding="{Binding x}" Width="70"/>
                    <DataGridTextColumn Header="Y좌표" Binding="{Binding y}" Width="70"/>
                    <DataGridTextColumn Header="판정" Binding="{Binding detected_class}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <GroupBox Header="상세 보기" Grid.Column="1" Margin="5" Padding="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="검사 이미지" HorizontalAlignment="Center" Margin="0,5" FontWeight="Bold"/>

                <Border Grid.Row="1" BorderBrush="#CCC" BorderThickness="1" Background="Black" CornerRadius="3">
                    <Image x:Name="imgPreview" Stretch="Uniform" Margin="2"/>
                </Border>

                <StackPanel Grid.Row="2" Margin="0,10,0,0">
                    <TextBlock Text="[ 파일 경로 ]" FontWeight="Bold" FontSize="11"/>
                    <TextBlock x:Name="txtImagePath" TextWrapping="Wrap" FontSize="11" Foreground="#555" Margin="0,3,0,10"/>
                    <Button Content="새로고침" Height="30" Click="btnRefresh_Click" Background="#E1E1E1"/>
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</Window>